(function(){var c=(window.event===null);$.extend($.fn,{regexMask:function(h){if(!this.length){d("no input element select selected");return this}var i=this[0];var g=$.data(i,"regexpMask");if(g){return g}g=new a(i,{mask:h});return g},});var e={8:"backspace",9:"tab",13:"enter",16:"shift",17:"control",18:"alt",27:"esc",33:"page up",34:"page down",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",116:"f5",123:"f12",224:"command"};var f={10:"go",127:"delete"};function b(g){return e[g]!=undefined}var a=function(h,g){this.element=h;this.$element=$(this.element);this.settings=$.extend({},g);this.init()};$.extend(a,{prototype:{init:function(){var k=this.settings,g=k.mask,h=this.element;g=$.RegexpMask.rules[g];if(!g){throw"mandatory mask argument missing"}errorClass=$.RegexpMask.errorClass;var j=undefined;if(g.mask){j=g.chars;var i=g.message;if(i){h.title=i}g=g.mask}this.mask=g;this.charsMask=j;this.bindEvents()},bindEvents:function(){var j=this,h=this.charsMask,g=this.element;this._preVal=g.value||"";var i=function(){if(!j.isValid()){j.showError()}else{j.hideError()}};this.$element.bind("keypress.regexp",function(m){var k=m.which||m.charCode,l=m["char"],n=m.keyCode;delete g.onkeyup;g.onkeyup=undefined;if(!k||(!l&&k==n)){switch(n){case 8:g.onkeyup=i;break;case 46:g.onkeyup=i;break;default:}return true}if(!j.isValid(k)){if(h){if(j.isValidChars(k)){j.showError();return true}else{return false}}j.showError();return false}j.hideError();return true}).bind("blur.regexp",function(k){j.hideError();if(!j.isValid()){g.value=j._preVal}return false})},isValid:function(h){var j=this.element,g="";var i=j.value;if(h){g=String.fromCharCode(h);var l=j.value.substring(0,j.selectionStart);var k=j.value.substring(j.selectionEnd,j.value.length);i=l+g+k}if(!i){this._preVal=i;return false}if(!this.mask.test(i)){return false}this._preVal=i;return true},isValidChars:function(g){return this.charsMask.test(String.fromCharCode(g))},showError:function(){this.$element.addClass(errorClass)},hideError:function(){this.$element.removeClass(errorClass)}}});$.extend({RegexpMask:{errorClass:"regexpError",rules:{"float-ptbr":/^((\d{1,3}(\.\d{3})*(((\.\d{0,2}))|((\,\d*)?)))|(\d+(\,\d*)?))$/,"float-enus":/^((\d{1,3}(\,\d{3})*(((\,\d{0,2}))|((\.\d*)?)))|(\d+(\.\d*)?))$/,digits:{mask:/^\d+$/,message:"只能输入数字"},number:{mask:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/,message:"只能输入整数"}}}});function d(){if(!$.fn.ajaxSubmit.debug){return}var g="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(g)}else{if(window.opera&&window.opera.postError){window.opera.postError(g)}}}})(jQuery);